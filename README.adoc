= Basic Bitcoin with Syron 

== Overview

This Proof of Concept (PoC) is a work in progress. Once completed, it'll walk you through deploying a sample SSI Vault to get Syron U$ dollars (SU$D) on Bitcoin. Syron is a Bitcoin-native stablecoin based on the Ordinals protocol that smoothly integrates with the Internet Computer at the protocol level to offer access to USD liquidity and Decentralized Finance (DeFi) on the Bitcoin mainnet. Leveraging the https://github.com/dfinity/examples/tree/master/rust/basic_bitcoin[Basic Bitcoin Example] as a foundation for the PoC ensures a seamless transition for this tutorial.

Explore the https://syron.ssiprotocol.com[Syron documentation] for more comprehensive insights.

== Architecture

image::public/images/syron_get_susd.png[]

The architecture of Syron includes:

- **Syron U$ Dollar (SU$D)**: A stablecoin pegged to USD, minted by over-collateralizing Bitcoin in Self-Sovereign Identity (SSI) Vaults.
- **SSI Vaults**: Hold BTC collateral and manage SU$D minting/burning.
- **Integration with Bitcoin**: Utilizes ICP for seamless integration with Bitcoin network, enabling verification of BTC collateral and transaction management.
- **Internet Computer Protocol (ICP)**: Facilitates smart contract execution and interoperability.
- **ckBTC and Elliptic DAO Protocol**: Foundation providing open-source software and reusable features.
- **Juno Integration**: Enhances user experience with user-controlled SSI Vaults. See https://github.com/txalkan/susd/tree/feat/syron-icp[SSI Browser].

image::public/images/syron_mint_susd.png[]

This architecture ensures easy access to USD liquidity while retaining BTC ownership, fostering a permissionless system with enhanced security and interoperability within the Bitcoin DeFi ecosystem.

== Prerequisites

Commands are provided using macOS as an example.

* [x] Install the https://internetcomputer.org/docs/current/developer-docs/setup/install/index.mdx[Internet Computer SDK]

----
sh -ci "$(curl -fsSL https://internetcomputer.org/install.sh)"
----

To verify the installation, run:

----
dfx --version
----

* [x] Download https://bitcoin.org/en/download[Bitcoin Core]

After downloading, unpack the .tar.gz file:

----
tar -xfz bitcoin-25.0-x86_64-apple-darwin.tar.gz
----

Then, open the bitcoin.conf file and insert the following content:

----
# Enable regtest mode. This is required to setup a private bitcoin network.
regtest=1

# Dummy credentials that are required by `bitcoin-cli`.
rpcuser=ic-btc-integration
rpcpassword=QPQiNaph19FqUsCrBRN0FII7lyM26B51fAMeBQzCb-E=
rpcauth=ic-btc-integration:cdf2741387f3a12438f69092f0fdad8e$62081498c98bee09a0dce2b30671123fa561932992ce377585e8e08bb0c11dfa
----

And start a local Bitcoin runtime with the command:

----
./bin/bitcoind -conf=$(pwd)/bitcoin.conf -datadir=$(pwd)/data --port=18444
----

== Local Deployment

=== Execution Environment

Start a local Internet Computer execution environment:

----
dfx start --clean
----

In a separate terminal tab, update the submodules recursively:

----
git submodule update --init --recursive
----

=== Syron Ledger

Deploy the Syron ledger:

----
make deploy_ledger
----

Save the ledger canister ID:

----
export LEDGER_ID=$(dfx canister id icrc1_ledger_syron)
----

=== Exchange Rate Canister

Install dependencies:

----
cd src/xrc_demo && npm i
----

Deploy locally:

----
dfx deploy
----

=== Syron Minter

Finally, deploy the Syron minter using:

----
cd ../.. && make deploy
----

=== Self-Sovereign Identity Vault

Obtain the deposit address for your SSI Vault with the following command:

----
make ssi_vault
----
